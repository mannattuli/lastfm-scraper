<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <title>LASTFM SCRAPER</title>
</head>
<body>

    <input id="user-ls" name="username" placeholder="username" />
    <select id="period">
        <option value="7day">7 days</option>
        <option value="1month">1 month</option>        
        <option value="3month">3 months</option>
        <option value="6month">6 months</option>
        <option value="12month">12 months</option>
        <option value="overall">all time</option>
    </select>

    <select id="limit">
        <option value="5">top 5</option>
        <option value="6">top 6</option>        
        <option value="7">top 7</option>
        <option value="8">top 8</option>
        <option value="9">top 9 </option>
        <option value="10">top 10</option>
    </select>

    <button onclick="getUsername()">submit</button>
    
    <br />
    
    <ol id="result"></ol>

    <script>


    function getUsername() {

        user_ls = document.getElementById("user-ls")
        result = document.getElementById("result")
        result.innerHTML = "";
        var method = "user.gettoptracks";
        var period = document.getElementById("period").value
        var limit = document.getElementById("limit").value

        var username = user_ls.value
        $(document).ready(function () {
            $.getJSON(
                "https://ws.audioscrobbler.com/2.0/?method=" + method + "&user=" + username + "&period="+ period + "&api_key=" + "953187488a724f2bf2eba12d1d5d8029" + "&limit=" + limit + "&format=json",
                // `https://ws.audioscrobbler.com/2.0/?method=user.getweeklytrackchart&user=${username}&api_key=953187488a724f2bf2eba12d1d5d8029&limit=10&format=json&callback=?`,
                function (json) {
                var html = "";
                $.each(json.toptracks.track, function (i, item) {
                    html +=
                    "<li><p><a href=" +
                    item.url +
                    " target='_blank'>" +
                    item.name +
                    "</a> - " +
                    "Play count : " +
                    item.playcount +
                    "</p></li>";
                });
                $("#result").append(html);
                }
            );
        });
    }
    </script>
</body>
</html>